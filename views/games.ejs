<% include partials/head.ejs %>

<header class="boxshadow">
  <div class="header-section">
    <!--<button class="nav-btn"><span>menu</span></button>-->
    <h2><%= tournamentName%></h2>
  </div>

  <div class="section-select boxshadow">
    <ul>
      <li><a href="#">GAMES</a></li>
      <li class="active"><a href="#">RANKINGS</a></li>
    </ul>
  </div>
</header>

<div class="division-tabs">
  <a href="/games"><button class="">Mixed</button></a>
  <a href="/games/19747"><button class="">Women</button></a>
  <a href="/games/19746"><button class="">Open</button></a>
</div>

<% if(locals.flashes) { %>
<% var categories =  Object.keys(locals.flashes)%>
<% for (category in categories) { %>
<%= category %>
<% } %>
<% } %>

<section>

  <div class="swiss-standings">
    <h2>Top <%= Object.keys(swiss).length %></h2>
    <table>
      <tr>
        <th>#</th>
        <th>TEAM</th>
        <th>Strength</th>
      </tr>
      <% swiss.forEach(function (obj) { %>
      <tr>
        <td><%= obj.ranking %>.</td>
        <td><a href="/teams/<%= obj.team.id %>"><%= obj.team.short_name %></a></td>
        <td><%= obj.swiss_score %></td>
      </tr>
      <% }) %>
    </table>
    <button class="action-button"><a href="/swiss-standings/<%= games[0].swiss_round_id %>">All Teams</a></button>

  </div>

  <!-- TODO -> Higlight some games based on swis spoint/ power rranking -->
  <!--<div class="background">-->
    <!--<ul class="gameslist">-->
      <!--<h2>Games to watch</h2>-->
      <!--<li>-->
        <!--<p>fake swiss round 2</p>-->
        <!--<p>name of fake tourney</p>-->
        <!--<a href="/#">-->
          <!--<div class="team1">-->
            <!--<h4><span>13</span></h4>-->
            <!--<h3>team</h3>-->
          <!--</div>-->

          <!--<div class="info">-->
            <!--<p> <b><%= new Date().toLocaleDateString() %></b></p>-->
            <!--<p> <b><%= new Date().toString().substr(15,6) %></b></p> &lt;!&ndash;
            <!--<p>location</p>-->
          <!--</div>-->

          <!--<div class="team2">-->
            <!--<h4><span>2</span></h4>-->
            <!--<h3>team</h3>-->
          <!--</div>-->
        <!--</a>-->
      <!--</li>-->
    <!--</ul>-->
  <!--</div>-->

  <div class="background team-games">
    <h2>Games</h2>
    <ul class="gameslist">
      <% games.forEach(function (obj) { %>
      <li>
        <p class="tournament-info">ROUND <%= obj.swiss_round.round_number %> - @<%= obj.tournament.name %></p>
        <a href="/update/<%= obj.id %>">
          <div class="team1">
            <h4><span><%= obj.team_1_score %></span></h4>
            <h3><%= obj.team_1.short_name %></h3>
          </div>

          <div class="info">
            <p> <b><%= h.moment(obj.start_time).format('dddd Do') %></b></p>
            <p> <b><%= new Date(obj.start_time).toString().substr(15,6) %></b></p>
            <p><%= obj.game_site.name %></p>
          </div>

          <div class="team2">
            <h4><span><%= obj.team_2_score %></span></h4>
            <h3><%= obj.team_2.short_name %></h3>
          </div>
        </a>
      </li>
      <% }) %>
    </ul>
  </div>

</section>

<% include partials/footer.ejs %>
